<div class="container mx-auto max-w-6xl">
  <h2 class="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3">
    <span class="bg-indigo-100 text-indigo-600 p-2 rounded-lg">ğŸ“¢</span>
    Validation des Signalements
  </h2>

  <div class="bg-white rounded-xl shadow border border-slate-200 overflow-hidden" *ngIf="pendingRequests$ | async as requests; else loading">
    
    <div *ngIf="requests.length === 0" class="p-12 text-center text-slate-500">
      <p class="text-lg">âœ… Aucun signalement en attente.</p>
    </div>

    <div class="overflow-x-auto" *ngIf="requests.length > 0">
      <table class="w-full text-left border-collapse">
        <thead class="bg-slate-50 text-slate-500 uppercase text-xs">
          <tr>
            <th class="p-4 font-semibold border-b border-slate-100">Signalement</th>
            <th class="p-4 font-semibold border-b border-slate-100">Description</th>
            <th class="p-4 font-semibold border-b border-slate-100">Date</th>
            <th class="p-4 font-semibold border-b border-slate-100 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          <tr *ngFor="let r of requests" class="hover:bg-slate-50 transition group">
            <td class="p-4 min-w-[200px]">
              <p class="text-slate-800 font-bold">{{ r.title }}</p>
              <div class="text-xs text-slate-400 mt-1">
                 ğŸ“ {{ r.lat | number:'1.2-2' }}, {{ r.lng | number:'1.2-2' }}
              </div>
            </td>
            <td class="p-4 max-w-xs">
              <p class="text-slate-600 text-sm line-clamp-2" title="{{ r.description }}">
                {{ r.description }}
              </p>
            </td>
            <td class="p-4 text-sm text-slate-500 whitespace-nowrap">
              {{ r.createdAt | date:'shortDate' }}
            </td>
            <td class="p-4 text-right space-x-2 whitespace-nowrap">
              <a [routerLink]="['/requests', r.id]" target="_blank" class="text-slate-400 hover:text-indigo-600 px-2 transition">ğŸ‘ï¸</a>
              <button (click)="moderate(r.id, 'approved')" class="bg-emerald-100 text-emerald-700 px-3 py-1 rounded text-xs font-bold hover:bg-emerald-200">Valider</button>
              <button (click)="moderate(r.id, 'rejected')" class="bg-red-100 text-red-700 px-3 py-1 rounded text-xs font-bold hover:bg-red-200">Rejeter</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #loading>
    <div class="p-8 text-center text-slate-500">Chargement...</div>
  </ng-template>
</div>
